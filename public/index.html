<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Old Skool Blackjack â€” Ultimate</title>
  <style>
    :root {
      --chalk-green: #3a5f42; --chalk-white: #eeeeee; --paper-white: #fdfbf7;
      --line-blue: #a2d2ff; --sticker-yellow: #ffeb3b; --sticker-pink: #ff80ab;
      --sticker-blue: #80d8ff; --card-w: 70px; --card-h: 100px;
    }

    body {
      font-family: "Comic Sans MS", "Chalkboard SE", "Marker Felt", sans-serif;
      background-color: var(--chalk-green); color: var(--chalk-white); margin: 0;
      height: 100vh; overflow: hidden; display: flex; flex-direction: column;
      touch-action: manipulation;
      background-image: radial-gradient(#4a6f52 2px, transparent 2px);
      background-size: 30px 30px;
    }

    /* SCREENS */
    .screen {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      display: none; flex-direction: column; justify-content: center; align-items: center;
      background: var(--chalk-green); z-index: 10;
    }
    .screen.active { display: flex; }

    #login-screen, #menu-screen, #lobby-screen, #online-screen {
      background-color: var(--paper-white);
      background-image: linear-gradient(var(--line-blue) 1px, transparent 1px);
      background-size: 100% 25px; color: #333;
    }
    
    #pass-device-screen {
      background: #222; text-align: center; border: 10px solid #fff; z-index: 300;
    }

    /* UI ELEMENTS */
    .logo-badge {
      display: inline-flex; align-items: center; gap: 10px; background: white;
      padding: 10px 16px; border: 3px solid #333; border-radius: 12px;
      box-shadow: 5px 5px 0 rgba(0,0,0,0.2); transform: rotate(-2deg); margin-bottom: 25px;
    }
    .logo-text { font-size: 2rem; font-weight: 900; line-height: 0.9; }
    
    .menu-btn {
      width: 85%; max-width: 340px; padding: 15px; border: 3px solid #333;
      border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px;
      font-family: inherit; font-size: 1.3rem; font-weight: bold; text-transform: uppercase;
      cursor: pointer; display: flex; flex-direction: column; align-items: center;
      gap: 5px; box-shadow: 3px 3px 0 #333; margin-bottom: 15px; background: white; color: #333;
    }
    .menu-btn:active { transform: scale(0.95); box-shadow: 1px 1px 0 #333; }
    .btn-yel { background: var(--sticker-yellow); transform: rotate(1deg); }
    .btn-blu { background: var(--sticker-blue); transform: rotate(-1deg); }
    .btn-pink { background: var(--sticker-pink); }
    
    input[type="text"] {
      padding: 10px; font-family: inherit; font-size: 1.3rem; background: transparent;
      color: #333; border: none; border-bottom: 3px solid #333; width: 280px;
      text-align: center; margin-bottom: 18px; outline: none;
    }
    
    /* LOBBY LIST */
    .lobby-list { width:90%; background:white; border:3px solid #333; border-radius:10px; padding:10px; margin-bottom:10px; min-height:150px; }
    .lobby-item { display:flex; justify-content:space-between; padding:8px; border-bottom:1px dashed #ccc; font-weight:bold; }

    /* GAME UI */
    #game-screen { background: var(--chalk-green); }
    #status-feed {
      position: absolute; top: 0; left: 0; width: 100%; height: 35px;
      background: rgba(0,0,0,0.3); color: white; display: flex; align-items: center; justify-content: center; z-index: 20;
    }
    #game-info-bar {
      position: absolute; top: 40px; width: 100%; display: flex; justify-content: center; gap: 20px; z-index: 5;
    }
    #cpu-area {
      position: absolute; top: 80px; width: 100%; display: flex; justify-content: space-around; height: 120px;
    }
    .opponent-wrapper {
      display: flex; flex-direction: column; align-items: center; transform: scale(0.85); transition: 0.3s; opacity: 0.6;
    }
    .opponent-wrapper.active-turn { opacity: 1; transform: scale(1.1); }
    .opponent-name { background: white; color: black; border: 2px solid black; padding: 2px 8px; font-weight: bold; border-radius: 10px 10px 10px 0; }
    
    #center-area {
      position: absolute; top: 52%; left: 50%; transform: translate(-50%, -50%); display: flex; gap: 20px; z-index: 2;
    }
    
    #player-area {
      position: absolute; bottom: 0; width: 100%; height: 140px;
      background-color: #d2a679; border-top: 5px solid #8d6e63;
      display: flex; justify-content: center; align-items: flex-end; padding-bottom: 20px;
    }

    #game-hud {
      position: absolute; top: 62%; right: 10px; transform: translateY(-50%);
      display: flex; flex-direction: column; gap: 10px; z-index: 100;
    }
    .hud-btn {
      padding: 15px 10px; border: 3px solid black; border-radius: 10px;
      font-weight: 900; cursor: pointer; background: white; box-shadow: 4px 4px 0 rgba(0,0,0,0.3);
    }
    .hud-btn:disabled { background: #ccc; color: #777; box-shadow: none; transform: none; }
    #btn-play { background: var(--sticker-pink); }
    #btn-last.called { background: #4caf50; color: white; transform: scale(0.95); }

    /* CARDS */
    .card {
      width: var(--card-w); height: var(--card-h); background: white; border-radius: 8px;
      border: 2px solid #333; position: relative; display: inline-flex; flex-direction: column;
      margin-left: -35px; cursor: pointer; box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
      transform: rotate(var(--fan-rot)) translateY(var(--fan-y)); transform-origin: bottom center;
      transition: transform 0.2s, margin 0.1s;
    }
    .card:first-child { margin-left: 0; }
    .card.red { color: #d32f2f; }
    .card.back { background: repeating-linear-gradient(45deg, #333 0, #333 2px, #fff 2px, #fff 4px); border: 3px solid white; }
    .card.back * { display: none; }
    .card.selected { border-color: var(--sticker-pink); transform: rotate(var(--fan-rot)) translateY(-40px) scale(1.1); z-index: 100 !important; }
    .card-corner { position: absolute; top: 2px; left: 4px; line-height: 0.9; text-align: center; font-weight: 900; }
    .center-suit { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); font-size: 30px; opacity: 0.2; }
    .card-bottom { position: absolute; bottom: 2px; right: 4px; transform: rotate(180deg); line-height: 0.9; text-align: center; font-weight: 900; }

    /* MODALS */
    #match-result-modal, #suit-modal {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.9); display: none;
      justify-content: center; align-items: center; z-index: 200; flex-direction: column; color: white;
    }
    .suit-btn { font-size: 40px; width: 70px; height: 70px; margin: 10px; cursor: pointer; background: white; border: 3px solid black; border-radius: 15px; }

    #toast {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      background: #333; color: white; padding: 15px 30px; border-radius: 20px;
      opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 300;
    }
    #toast.show { opacity: 1; }
  </style>
</head>
<body>

<div id="toast"></div>

<div id="login-screen" class="screen active">
  <div class="logo-badge">
    <div style="font-size:30px">â™ </div>
    <div class="logo-text">OLD SKOOL<br>ULTIMATE</div>
  </div>
  <input type="text" id="username-input" placeholder="Your Name" maxlength="10">
  <button class="menu-btn btn-pink" onclick="signUp()">START</button>
</div>

<div id="menu-screen" class="screen">
  <h2 style="margin-bottom:20px">Hello, <span id="menu-username"></span></h2>
  <button class="menu-btn btn-blu" onclick="goToLobby()">ðŸŽ² PASS & PLAY <small>Offline â€¢ Bots â€¢ Friends</small></button>
  <button class="menu-btn btn-yel" onclick="goToOnline()">ðŸ“¡ ONLINE <small>Host or Join Server</small></button>
</div>

<div id="lobby-screen" class="screen">
  <h2>LOCAL TABLE</h2>
  <div class="lobby-list" id="local-list"></div>
  <div style="display:flex; gap:10px;">
    <button class="menu-btn btn-yel" style="width:auto" onclick="addBot()">+ BOT</button>
    <button class="menu-btn btn-blu" style="width:auto" onclick="addHuman()">+ HUMAN</button>
  </div>
  <button class="menu-btn btn-pink" style="margin-top:10px" onclick="startLocalGame()">DEAL CARDS</button>
  <button onclick="showScreen('menu-screen')" style="margin-top:10px; border:none; background:none; font-weight:bold; cursor:pointer">â†© BACK</button>
</div>

<div id="online-screen" class="screen">
  <h2>ONLINE SERVER</h2>
  <div style="margin-bottom:20px; font-weight:bold; color:#555">Status: <span id="conn-status">Disconnected</span></div>
  
  <div style="background:white; padding:15px; border:3px solid #333; border-radius:10px; margin-bottom:15px; text-align:center;">
    <input type="text" id="join-code" placeholder="Enter Room Code" style="background:#eee">
    <div style="display:flex; justify-content:center; gap:10px;">
      <button class="menu-btn btn-blu" style="width:100px; margin:0" onclick="netJoin()">JOIN</button>
      <button class="menu-btn btn-yel" style="width:100px; margin:0" onclick="netHost()">HOST</button>
    </div>
  </div>

  <div id="host-panel" style="display:none; text-align:center;">
    <h3>Code: <span id="my-code" style="background:#ffeb3b; padding:5px;">---</span></h3>
    <p>Waiting for players...</p>
    <button class="menu-btn btn-pink" id="net-deal-btn" onclick="netDeal()" disabled>DEAL!</button>
  </div>
  
  <button onclick="showScreen('menu-screen')" style="margin-top:10px; border:none; background:none; font-weight:bold; cursor:pointer">â†© BACK</button>
</div>

<div id="pass-device-screen" class="screen">
  <h1 style="color:white; font-size:3rem;">PASS THE DEVICE</h1>
  <h2 style="color:var(--sticker-yellow)">To: <span id="next-player-name">...</span></h2>
  <p style="color:#ccc">(No peeking!)</p>
  <button class="menu-btn btn-pink" onclick="revealTurn()">I'M READY</button>
</div>

<div id="game-screen" class="screen">
  <div id="status-feed">Game Started</div>
  <div id="game-info-bar">
    <div id="turn-status" style="color:white; font-weight:bold; text-shadow:1px 1px 0 black;"></div>
    <div id="attack-status" style="color:var(--sticker-yellow); font-weight:bold; text-shadow:1px 1px 0 black;"></div>
  </div>

  <div id="cpu-area"></div>

  <div id="center-area">
    <div id="draw-pile" class="card back" onclick="uiAction('pickup')"></div>
    <div id="discard-pile"></div>
  </div>

  <div id="game-hud">
    <button class="hud-btn" id="btn-play" onclick="uiAction('play')">PLAY</button>
    <button class="hud-btn" id="btn-pickup" onclick="uiAction('pickup')">DRAW</button>
    <button class="hud-btn" id="btn-last" onclick="uiAction('last')">LAST!</button>
  </div>

  <div id="player-area"><div id="player-hand" style="position:relative; width:100%; height:100%; display:flex; justify-content:center; align-items:flex-end;"></div></div>
</div>

<div id="suit-modal">
  <h2>PICK A SUIT</h2>
  <div style="display:flex;">
    <button class="suit-btn" onclick="uiAction('suit','H')" style="color:#d32f2f">â™¥</button>
    <button class="suit-btn" onclick="uiAction('suit','D')" style="color:#d32f2f">â™¦</button>
    <button class="suit-btn" onclick="uiAction('suit','C')">â™£</button>
    <button class="suit-btn" onclick="uiAction('suit','S')">â™ </button>
  </div>
</div>

<div id="match-result-modal">
  <h1 id="result-title" style="font-size:3rem; color:var(--sticker-yellow); text-shadow:3px 3px 0 #000;"></h1>
  <button class="menu-btn btn-pink" onclick="location.reload()">MENU</button>
</div>

<script>
// ==========================================
// 1. ENGINE (Local Logic)
// ==========================================
const SUITS = ["â™ ", "â™¥", "â™¦", "â™£"];
const RANKS = ["A", "2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K"];
const POWER_RANKS = new Set(["A", "2", "8", "J", "Q", "K"]);

let gameMode = "local"; // 'local' or 'online'
let localState = null;
let ws = null;
let myId = null; 
let selection = [];

// --- Local Helpers ---
function createDeck() {
  let d = []; for(let s of SUITS) for(let r of RANKS) d.push({suit:s, rank:r});
  return d.sort(() => Math.random() - 0.5);
}

function initLocalGame(players) {
  const deck = createDeck();
  const discard = [];
  const pObjs = players.map(p => ({ 
    id: Math.random().toString(), name: p.name, isBot: p.isBot, hand: [], lastDeclared: false 
  }));
  
  // Deal
  for(let i=0; i<7; i++) pObjs.forEach(p => p.hand.push(deck.pop()));
  
  // Start Card
  while(true) {
    let c = deck.pop();
    if(!POWER_RANKS.has(c.rank)) { discard.push(c); break; }
    deck.unshift(c);
  }
  
  localState = {
    deck, discard, players: pObjs, turnIndex: 0, direction: 1, 
    activeSuit: discard[0].suit, pendingDraw2:0, pendingDrawJ:0, pendingSkip:0,
    awaitingSuit: false, winner: null
  };
  
  checkBotTurn();
  updateUI();
}

function localPlay(idxArr) {
  const st = localState;
  const p = st.players[st.turnIndex];
  const handCards = idxArr.map(i => p.hand[i]);
  const card = handCards[0]; // Validation simplified for brevity
  
  // Remove cards
  idxArr.sort((a,b)=>b-a).forEach(i => p.hand.splice(i,1));
  
  // Effects
  handCards.forEach((c, i) => {
    st.discard.push(c);
    const isLast = i === handCards.length-1;
    if(c.rank === '2') st.pendingDraw2 += 2;
    if(c.rank === '8') st.pendingSkip++;
    if(c.rank === 'J') st.pendingDrawJ += (c.suit==='â™ '||c.suit==='â™£') ? 5 : 0; // Simplified
    if(c.rank === 'Q') st.direction *= -1;
    if(c.rank === 'A' && isLast) st.awaitingSuit = true;
    if(c.rank !== 'A' && isLast) st.activeSuit = c.suit;
  });

  if(p.hand.length === 0) st.winner = p.name;
  
  if(!st.awaitingSuit) advanceTurn();
}

function localDraw() {
  const st = localState;
  const p = st.players[st.turnIndex];
  const count = st.pendingDraw2 || st.pendingDrawJ || 1;
  for(let i=0; i<count; i++) {
    if(st.deck.length===0) st.deck = st.discard.splice(0, st.discard.length-1).sort(()=>Math.random()-0.5);
    if(st.deck.length) p.hand.push(st.deck.pop());
  }
  st.pendingDraw2 = 0; st.pendingDrawJ = 0; st.pendingSkip = 0;
  advanceTurn();
}

function advanceTurn() {
  const st = localState;
  st.players[st.turnIndex].lastDeclared = false;
  const num = st.players.length;
  st.turnIndex = (st.turnIndex + st.direction + num) % num;
  checkBotTurn();
  
  // Pass Device Check
  const nextP = st.players[st.turnIndex];
  if(!nextP.isBot && st.players.filter(x=>!x.isBot).length > 1) {
    showPassScreen(nextP.name);
  }
}

function checkBotTurn() {
  const st = localState;
  const p = st.players[st.turnIndex];
  if(p.isBot && !st.winner) {
    setTimeout(() => {
      // Very dumb bot: try to play first valid card or draw
      const top = st.discard[st.discard.length-1];
      const validIdx = p.hand.findIndex(c => c.suit === st.activeSuit || c.rank === top.rank || c.rank === 'A');
      if(validIdx >= 0) {
        if(p.hand.length===2) p.lastDeclared=true; // Bot calls last
        localPlay([validIdx]);
      } else {
        localDraw();
      }
      updateUI();
    }, 1500);
  }
}

// ==========================================
// 2. NETWORK (Server Bridge)
// ==========================================
function connectNet() {
  const proto = location.protocol === 'https:' ? 'wss' : 'ws';
  ws = new WebSocket(`${proto}://${location.host}`);
  ws.onopen = () => document.getElementById('conn-status').innerText = "Connected";
  ws.onmessage = (e) => {
    const msg = JSON.parse(e.data);
    if(msg.type === 'GAME_STATE') { localState = msg.state; updateUI(); }
    if(msg.type === 'ROOM_JOINED') {
      myId = msg.playerId;
      document.getElementById('my-code').innerText = msg.code;
      if(msg.isHost) document.getElementById('host-panel').style.display='block';
    }
    if(msg.type === 'PLAYER_UPDATE') {
      document.getElementById('conn-status').innerText = `Players: ${msg.names.join(", ")}`;
      if(msg.names.length > 1) document.getElementById('net-deal-btn').disabled = false;
    }
    if(msg.type === 'TOAST') showToast(msg.msg);
  };
}

// ==========================================
// 3. UI CONTROLLER (Unified)
// ==========================================
let lobbyList = [];

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

function signUp() {
  const name = document.getElementById('username-input').value || "Player";
  localStorage.setItem('username', name);
  document.getElementById('menu-username').innerText = name;
  showScreen('menu-screen');
}

// Local Lobby
function goToLobby() { 
  gameMode = 'local'; 
  lobbyList = [{name: localStorage.getItem('username'), isBot: false}];
  renderLobby();
  showScreen('lobby-screen'); 
}
function addBot() { if(lobbyList.length<4) lobbyList.push({name: "Bot "+(lobbyList.length), isBot: true}); renderLobby(); }
function addHuman() { if(lobbyList.length<4) lobbyList.push({name: "Player "+(lobbyList.length+1), isBot: false}); renderLobby(); }
function renderLobby() {
  const div = document.getElementById('local-list'); div.innerHTML = "";
  lobbyList.forEach(p => div.innerHTML += `<div class="lobby-item"><span>${p.name}</span><small>${p.isBot?'BOT':'HUMAN'}</small></div>`);
}
function startLocalGame() { initLocalGame(lobbyList); showScreen('game-screen'); }

// Online Lobby
function goToOnline() { gameMode = 'online'; connectNet(); showScreen('online-screen'); }
function netHost() { ws.send(JSON.stringify({type:'CREATE_ROOM', name: localStorage.getItem('username')})); }
function netJoin() { ws.send(JSON.stringify({type:'JOIN_ROOM', code: document.getElementById('join-code').value, name: localStorage.getItem('username')})); }
function netDeal() { ws.send(JSON.stringify({type:'START_GAME'})); }

// Game Actions
function uiAction(action, arg) {
  if(gameMode === 'local') {
    // Local Logic Direct Call
    const st = localState;
    if(action === 'pickup') localDraw();
    if(action === 'play') { localPlay(selection); selection = []; }
    if(action === 'last') st.players[st.turnIndex].lastDeclared = true;
    if(action === 'suit') { st.activeSuit = arg==='H'?'â™¥':arg==='D'?'â™¦':arg==='C'?'â™£':'â™ '; st.awaitingSuit=false; advanceTurn(); }
    updateUI();
  } else {
    // Online Send
    if(action === 'pickup') ws.send(JSON.stringify({type:'ACTION_PICKUP'}));
    if(action === 'play') { ws.send(JSON.stringify({type:'ACTION_PLAY', indices: selection})); selection = []; }
    if(action === 'last') ws.send(JSON.stringify({type:'ACTION_LAST'}));
    if(action === 'suit') ws.send(JSON.stringify({type:'ACTION_SUIT', suitChar: arg}));
  }
  document.getElementById('suit-modal').style.display = 'none';
}

function toggleSelect(i) {
  const idx = selection.indexOf(i);
  if(idx > -1) selection.splice(idx,1); else selection.push(i);
  updateUI();
}

function showPassScreen(name) {
  document.getElementById('pass-device-screen').classList.add('active');
  document.getElementById('next-player-name').innerText = name;
}
function revealTurn() {
  document.getElementById('pass-device-screen').classList.remove('active');
}

// RENDERER (Works for both Local and Online state objects)
function updateUI() {
  const st = localState;
  if(!st) return;

  // 1. Identify "Me" (Local: current turn player / Online: myId)
  let meIndex = st.turnIndex;
  let me = st.players[meIndex];

  // If online, find my actual object
  if(gameMode === 'online') {
    me = st.players.find(p => p.id === myId);
    if(!me) return; // Spectator?
  } else {
    // In pass and play, we render the screen FOR the current player
    // unless it's a bot, then we just spectate
  }

  const activeP = st.players[st.turnIndex];
  const isMyTurn = (gameMode==='local' && !activeP.isBot) || (gameMode==='online' && activeP.id === myId);

  document.getElementById('turn-status').innerText = isMyTurn ? "YOUR TURN" : `${activeP.name}'s TURN`;
  document.getElementById('attack-status').innerText = st.pendingDraw2 ? `DRAW +${st.pendingDraw2}` : (st.pendingSkip ? "SKIPPED!" : "");
  
  // Hand
  const handDiv = document.getElementById('player-hand');
  handDiv.innerHTML = "";
  
  // If local, show current player hand. If online, show MY hand.
  const cardsToShow = (gameMode === 'local') ? activeP.hand : me.hand;
  
  // Only show cards if it's a human (local) or me (online)
  if((gameMode === 'local' && !activeP.isBot) || gameMode === 'online') {
      const center = (cardsToShow.length-1)/2;
      cardsToShow.forEach((c, i) => {
        const el = document.createElement('div');
        el.className = `card ${['â™¥','â™¦'].includes(c.suit)?'red':''}`;
        if(selection.includes(i)) el.classList.add('selected');
        el.innerHTML = `<div class="card-corner">${c.rank}<br>${c.suit}</div><div class="center-suit">${c.suit}</div><div class="card-bottom">${c.rank}<br>${c.suit}</div>`;
        
        // Fan
        const dist = i - center;
        el.style.setProperty('--fan-rot', (dist * 5) + 'deg');
        el.style.setProperty('--fan-y', (Math.abs(dist)*5) + 'px');
        el.style.zIndex = i;
        
        el.onclick = () => { if(isMyTurn) toggleSelect(i); };
        handDiv.appendChild(el);
      });
  }

  // Discard
  const dp = document.getElementById('discard-pile'); dp.innerHTML = "";
  if(st.discard.length) {
    const top = st.discard[st.discard.length-1];
    dp.innerHTML = `<div class="card ${['â™¥','â™¦'].includes(top.suit)?'red':''}"><div class="card-corner">${top.rank}<br>${top.suit}</div><div class="center-suit">${top.suit}</div></div>`;
    if(st.activeSuit) dp.innerHTML += `<div style="position:absolute; bottom:-10px; right:-10px; background:white; width:30px; height:30px; border-radius:50%; border:2px solid black; text-align:center; line-height:30px; color:${['â™¥','â™¦'].includes(st.activeSuit)?'red':'black'}">${st.activeSuit}</div>`;
  }

  // Buttons
  document.getElementById('btn-play').disabled = !isMyTurn || selection.length===0;
  document.getElementById('btn-pickup').disabled = !isMyTurn;
  const btnLast = document.getElementById('btn-last');
  if((gameMode==='local'?activeP:me).lastDeclared) { btnLast.classList.add('called'); btnLast.innerText="CALLED"; } else { btnLast.classList.remove('called'); btnLast.innerText="LAST!"; }

  // Opponents
  const cpuDiv = document.getElementById('cpu-area'); cpuDiv.innerHTML = "";
  st.players.forEach(p => {
    if(p.id === (gameMode==='local'?activeP.id : me.id)) return; // Don't show myself in opponent bar
    cpuDiv.innerHTML += `<div class="opponent-wrapper ${p.id===activeP.id?'active-turn':''}"><div class="opponent-name">${p.name}</div><div style="font-size:0.8rem">ðŸ‚  ${p.cardCount || p.hand.length}</div></div>`;
  });

  // Modal
  if(st.winner) {
    document.getElementById('match-result-modal').style.display='flex';
    document.getElementById('result-title').innerText = `${st.winner} WINS!`;
  }
  if(st.awaitingSuit && isMyTurn) document.getElementById('suit-modal').style.display='flex';
}

function showToast(m) { const t=document.getElementById('toast'); t.innerText=m; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),2000); }
</script>
</body>
</html>
